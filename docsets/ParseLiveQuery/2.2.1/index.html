<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <title>ParseLiveQuery Reference</title> <link rel="stylesheet" type="text/css" href="css/jazzy.css"> <link rel="stylesheet" type="text/css" href="css/highlight.css"> <meta charset="utf-8"> <script src="js/jquery.min.js" defer></script> <script src="js/jazzy.js" defer></script> </head> <body> <a title="ParseLiveQuery Reference"></a> <header> <div class="content-wrapper"> <p><a href="index.html">ParseLiveQuery Docs</a> (92% documented)</p> <p class="header-right"><a href="dash-feed://http%3A%2F%2Fcocoadocs%2Eorg%2Fdocsets%2FParseLiveQuery%2FParseLiveQuery%2Exml"><img src="img/dash.png">Install in Dash</a></p> </div> </header> <div class="content-wrapper"> <p id="breadcrumbs"> <a href="index.html">ParseLiveQuery Reference</a> <img id="carat" src="img/carat.png"> ParseLiveQuery Reference </p> </div> <div class="content-wrapper"> <nav class="sidebar"> <ul class="nav-groups"> <li class="nav-group-name"> <a href="Classes.html">Classes</a> <ul class="nav-group-tasks"> <li class="nav-group-task"> <a href="Classes/Client.html">Client</a> </li> <li class="nav-group-task"> <a href="Classes/Subscription.html">Subscription</a> </li> </ul> </li> <li class="nav-group-name"> <a href="Enums.html">Enumerations</a> <ul class="nav-group-tasks"> <li class="nav-group-task"> <a href="Enums/Event.html">Event</a> </li> <li class="nav-group-task"> <a href="Enums/PFLiveQueryEventType.html">PFLiveQueryEventType</a> </li> </ul> </li> <li class="nav-group-name"> <a href="Extensions.html">Extensions</a> <ul class="nav-group-tasks"> <li class="nav-group-task"> <a href="Extensions/PFQuery.html">PFQuery</a> </li> </ul> </li> <li class="nav-group-name"> <a href="Protocols.html">Protocols</a> <ul class="nav-group-tasks"> <li class="nav-group-task"> <a href="Protocols/ObjCCompat_SubscriptionHandling.html">ObjCCompat_SubscriptionHandling</a> </li> <li class="nav-group-task"> <a href="Protocols/SubscriptionHandling.html">SubscriptionHandling</a> </li> </ul> </li> <li class="nav-group-name"> <a href="Structs.html">Structures</a> <ul class="nav-group-tasks"> <li class="nav-group-task"> <a href="Structs/LiveQueryErrors.html">LiveQueryErrors</a> </li> <li class="nav-group-task"> <a href="Structs/LiveQueryErrors/InvalidResponseError.html">– InvalidResponseError</a> </li> <li class="nav-group-task"> <a href="Structs/LiveQueryErrors.html#/s:VV14ParseLiveQuery15LiveQueryErrors17InvalidQueryError">– InvalidQueryError</a> </li> <li class="nav-group-task"> <a href="Structs/LiveQueryErrors/InvalidJSONError.html">– InvalidJSONError</a> </li> <li class="nav-group-task"> <a href="Structs/LiveQueryErrors/InvalidJSONObject.html">– InvalidJSONObject</a> </li> <li class="nav-group-task"> <a href="Structs/LiveQueryErrors/ServerReportedError.html">– ServerReportedError</a> </li> <li class="nav-group-task"> <a href="Structs/ObjCCompat.html">ObjCCompat</a> </li> <li class="nav-group-task"> <a href="Structs/ObjCCompat/Event.html">– Event</a> </li> <li class="nav-group-task"> <a href="Structs/ObjCCompat/Subscription.html">– Subscription</a> </li> </ul> </li> </ul> </nav> <article class="main-content"> <section> <section class="section"> <h1>Parse LiveQuery Client for iOS/OSX</h1> <p><br> </p> <p><br> </p> <p></p> <p><code>PFQuery</code> is one of the key concepts for Parse. It allows you to retrieve <code>PFObject</code>s by specifying some conditions, making it easy to build apps such as a dashboard, a todo list or even some strategy games. However, <code>PFQuery</code> is based on a pull model, which is not suitable for apps that need real-time support.</p> <p>Suppose you are building an app that allows multiple users to edit the same file at the same time. <code>PFQuery</code> would not be an ideal tool since you can not know when to query from the server to get the updates.</p> <p>To solve this problem, we introduce Parse LiveQuery. This tool allows you to subscribe to a <code>PFQuery</code> you are interested in. Once subscribed, the server will notify clients whenever a <code>PFObject</code> that matches the <code>PFQuery</code> is created or updated, in real-time.</p> <h2>Setup Server</h2> <p>Parse LiveQuery contains two parts, the LiveQuery server and the LiveQuery clients. In order to use live queries, you need to set up both of them.</p> <p>The easiest way to setup the LiveQuery server is to make it run with the <a href="https://github.com/ParsePlatform/parse-server/wiki/Parse-LiveQuery#server-setup">Open Source Parse Server</a>.</p> <h2>Use Client</h2> <p>The LiveQuery client interface is based around the concept of <code><a href="https://raw.github.com/ParsePlatform/parse-server/2.2.1/Classes/Subscription.html">Subscription</a></code>s. You can register any <code>PFQuery</code> for live updates from the associated live query server, by simply calling <code>subscribe()</code> on a query:</p> <div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> myQuery <span class="pl-k">=</span> Message.<span class="pl-c1">query</span>()<span class="pl-k">!</span>.<span class="pl-c1">where</span>(<span class="pl-k">....</span>)
<span class="pl-k">let</span> subscription<span class="pl-k">:</span> Subscription<span class="pl-k">&lt;</span>Message<span class="pl-k">&gt;</span> <span class="pl-k">=</span> Client.<span class="pl-smi">shared</span>.<span class="pl-c1">subscribe</span>(myQuery)</pre></div> <p>Where <code>Message</code> is a registered subclass of PFObject.</p> <p>Once you’ve subscribed to a query, you can <code>handle</code> events on them, like so:</p> <div class="highlight highlight-source-swift"><pre>subscription.<span class="pl-smi">handleEvent</span> { query, event <span class="pl-k">in</span>
    <span class="pl-c"><span class="pl-c">//</span> Handle event</span>
<span class="pl-c"></span>}</pre></div> <p>You can also handle a single type of event, if that’s all you’re interested in:</p> <div class="highlight highlight-source-swift"><pre>subscription.<span class="pl-c1">handle</span>(Event.<span class="pl-smi">Created</span>) { query, object <span class="pl-k">in</span>
    <span class="pl-c"><span class="pl-c">//</span> Called whenever an object was created</span>
<span class="pl-c"></span>}</pre></div> <p>Handling errors is and other events is similar, take a look at the <code><a href="https://raw.github.com/ParsePlatform/parse-server/2.2.1/Classes/Subscription.html">Subscription</a></code> class for more information.</p> <h2>Advanced Usage</h2> <p>You are not limited to a single Live Query Client - you can create your own instances of <code><a href="https://raw.github.com/ParsePlatform/parse-server/2.2.1/Classes/Client.html">Client</a></code> to manually control things like reconnecting, server URLs, and more.</p> <h2>How Do I Contribute?</h2> <p>We want to make contributing to this project as easy and transparent as possible. Please refer to the <a href="https://github.com/parse-community/ParseLiveQuery-iOS-OSX/blob/master/CONTRIBUTING.md">Contribution Guidelines</a>.</p> <p></p> <hr> <p>As of April 5, 2017, Parse, LLC has transferred this code to the parse-community organization, and will no longer be contributing to or distributing this code.</p> </section> </section> <section id="footer"> <p>© 2017 <a class="link" href="" target="_blank" rel="external"></a>. All rights reserved. (Last updated: 2017-11-26)</p> <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.0</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p> </section> </article> </div> </body> </html>